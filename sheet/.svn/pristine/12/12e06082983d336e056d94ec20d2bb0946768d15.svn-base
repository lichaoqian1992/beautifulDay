package com.manji.sheet.controller;

import com.jfinal.core.Controller;
import com.jfinal.plugin.activerecord.Record;
import com.manji.sheet.service.ShopAppService;
import com.manji.sheet.utils.WorkerNumberUtil;
import net.sf.json.JSONObject;

import java.util.List;

/**
 * Created by pudding on 2017-6-19.(YYR 商家APP控制器)
 */
public class ShopController extends Controller {

    ShopAppService shopAppService=new ShopAppService();

    public void LaunchAreport(){

    }


    //发起工单
    public void saveSheet(){
        String short_title=getPara("short_title");
        String code_type=getPara("code_type");
        String descr=getPara("descr");
        String status="1";//默认状态为待处理
        String sheet_no=WorkerNumberUtil.GeneratWorkerNumber(short_title); //生成工单号
        shopAppService.saveSheets(sheet_no,status,code_type,"","","","","Shop","加急","0");//生成工单
        Record record=shopAppService.findSheetBySheetNo(sheet_no);//获取工单
        shopAppService.saveSheetInfo(record.get("id").toString(),descr,null,null);
    }

}
