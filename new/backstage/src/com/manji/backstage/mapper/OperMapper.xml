<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.manji.backstage.mapper.OperMapper" >




<!-- /////////////////////////////////////////////////////////////////////////////////////////////////// -->

<select id="countAppVersion" parameterType="AppVersionVo" resultType="int">
select count(*) from dt_app_version where 1=1
	<if test="ver_name != null and ver_name != ''">
		and ver_name=#{ver_name}
	</if>
	<if test="ver_category != null and ver_category != ''">
		and ver_category =#{ver_category}
	</if>
	<if test="is_up != null and is_up != ''">
		and is_up =#{is_up}
	</if>
	<if test="type != null and type != ''">
		and type =#{type}
	</if>

</select>
<select id="queryAppVersion" parameterType="AppVersionVo" resultType="AppVersion">

SELECT * FROM 

		( SELECT row_number() over (order by tempcolumn) temprownumber, * FROM  

		( SELECT TOP (#{index}*20) tempcolumn=0, *  from dt_app_version   where  1=1 
		
			<if test="ver_name != null and ver_name != ''">
				and ver_name=#{ver_name}
			</if>
			<if test="ver_category != null and ver_category != ''">
				and ver_category =#{ver_category}
			</if>
			<if test="is_up != null and is_up != ''">
				and is_up =#{is_up}
			</if>
			<if test="type != null and type != ''">
				and type =#{type}
			</if>
		order by id desc
		 )vip)mvp where temprownumber>((#{index}-1)*20)

</select>

<select id="getAppVersion" parameterType="int" resultType="AppVersion">
select * from dt_app_version where id=#{0}
</select>

<insert id="addAppVersion" parameterType="AppVersion">
insert into dt_app_version 
(ver_name,ver_url,rel_datetime,ver_category,is_up,count,type)
values (#{ver_name},#{ver_url},#{rel_datetime},#{ver_category},#{is_up},#{count},#{type})
</insert>


<update id="updAppVersion" parameterType="AppVersion">
update dt_app_version set 
ver_name=#{ver_name},
ver_url=#{ver_url},
rel_datetime=#{rel_datetime},
ver_category=#{ver_category},
is_up=#{is_up},
count=#{count},
type=#{type}
where id=#{id}
</update>

<delete id="delAppVersion" parameterType="int">
delete from dt_app_version where id=#{0}
</delete>

<!-- /////////////////////////////////////////////////////////////////////////////////////////////////// -->

<select id="countQrCode" parameterType="QrCodeVo" resultType="int">
select count(*) from dt_qr_code where 1=1
			<if test="user_id != null and user_id != ''">
				and user_id=#{user_id}
			</if>
			<if test="name != null and name != ''">
				and name =#{name}
			</if>
				and status =#{status}
			
			<if test="type != null and type != ''">
				and type =#{type}
			</if>

</select>
<select id="queryQrCode" parameterType="QrCodeVo" resultType="QrCode">

SELECT * FROM 

		( SELECT row_number() over (order by tempcolumn) temprownumber, * FROM  

		( SELECT TOP (#{index}*20) tempcolumn=0, *  from dt_qr_code   where  1=1 
		
			<if test="user_id != null and user_id != ''">
				and user_id=#{user_id}
			</if>
			<if test="name != null and name != ''">
				and name =#{name}
			</if>
			
				and status =#{status}
			
			<if test="type != null and type != ''">
				and type =#{type}
			</if>
		order by id desc
		 )vip)mvp where temprownumber>((#{index}-1)*20)

</select>

<select id="getQrCode" parameterType="int" resultType="QrCode">
select * from dt_qr_code where id=#{0}
</select>

<insert id="addQrCode" parameterType="QrCode">
insert into dt_qr_code 
(type,name,amount,add_time,invalid_time,status,content,user_id,user_role_type,user_role_value)
values (#{type},#{name},#{amount},#{add_time},#{invalid_time},#{status},#{content},#{user_id},#{user_role_type},#{user_role_value})
</insert>


<update id="updQrCode" parameterType="QrCode">
update dt_qr_code set 
type=#{type},
name=#{name},
amount=#{amount},
add_time=#{add_time},
invalid_time=#{invalid_time},
status=#{status},
content=#{content},
user_id=#{user_id},
user_role_type=#{user_role_type},
user_role_value=#{user_role_value} 
where id=#{id}
</update>

<delete id="delQrCode" parameterType="int">
delete from dt_qr_code where id=#{0}
</delete>



<!-- /////////////////////////////////////////////////////////////////////////////////////////////////// -->

<select id="countMenu" parameterType="MenuVo" resultType="int">
select count(*) from dt_menu where 1=1
			<if test="title != null and title != ''">
				and title=#{title}
			</if>
			<if test="type != null and type != ''">
				and type =#{type}
			</if>
				and status =#{status}

</select>

<select id="queryMenu" parameterType="MenuVo" resultType="Menu">

SELECT * FROM 

		( SELECT row_number() over (order by tempcolumn) temprownumber, * FROM  

		( SELECT TOP (#{index}*20) tempcolumn=0, *  from dt_menu   where  1=1 
		
			<if test="title != null and title != ''">
				and title=#{title}
			</if>
			<if test="type != null and type != ''">
				and type =#{type}
			</if>
				and status =#{status}
			
		order by id desc
		 )vip)mvp where temprownumber>((#{index}-1)*20)

</select>

<select id="getMenu" parameterType="int" resultType="Menu">
select * from dt_menu where id=#{0}
</select>

<insert id="addMenu" parameterType="Menu">
insert into dt_menu 
(title,icon,url,type,sort_id,show_area,status,site_id)
values (#{title},#{icon},#{url},#{type},#{sort_id},#{show_area},#{status},#{site_id})
</insert>

<update id="updMenu" parameterType="Menu">
update dt_menu set 
title=#{title},
icon=#{icon},
url=#{url},
type=#{type},
sort_id=#{sort_id},
show_area=#{show_area},
status=#{status},
site_id=#{site_id}
where id=#{id}
</update>

<delete id="delMenu" parameterType="int">
delete from dt_menu where id=#{0}
</delete>


<!-- /////////////////////////////////////////////////////////////////////////////////////////////////// -->

<select id="countScreen" parameterType="ScreenVo" resultType="int">
select count(*) from dt_screen where 1=1 
			<if test="title != null and title != ''">
				and title like '%'+#{title}+'%'
			</if>
			<if test="content != null and content != ''">
				and content like '%'+#{content}+'%'
			</if>
				and status =#{status}
</select>

<select id="queryScreen" parameterType="ScreenVo" resultType="Screen">
SELECT * FROM 

		( SELECT row_number() over (order by tempcolumn) temprownumber, * FROM  

		( SELECT TOP (#{index}*20) tempcolumn=0, *  from dt_screen   where  1=1 
		
			<if test="title != null and title != ''">
				and title like '%'+#{title}+'%'
			</if>
			<if test="content != null and content != ''">
				and content like '%'+#{content}+'%'
			</if>
				and status =#{status}
			
		order by id desc
		 )vip)mvp where temprownumber>((#{index}-1)*20)

</select>

<select id="getScreen" parameterType="int" resultType="Screen">
select * from dt_screen where id=#{0}
</select>

<insert id="addScreen" parameterType="Screen">
insert into dt_screen 
(site_id,title,channel_id,category_id,sort_id,show_area,content,status)
values (#{site_id},#{title},#{channel_id},#{category_id},#{sort_id},#{show_area},#{content},#{status})
</insert>

<update id="updScreen" parameterType="Screen">
update dt_screen set 
site_id=#{site_id},
title=#{title},
channel_id=#{channel_id},
category_id=#{category_id},
sort_id=#{sort_id},
show_area=#{show_area},
content=#{content},
status=#{status}
where id=#{id}
</update>

<delete id="delScreen" parameterType="int">
delete from dt_screen where id=#{0}
</delete>


<!-- 获取广告导航中的类别 -->
<select id="getAdvertType" resultType="map" >
	select type from dt_advert_navigation group by type 
</select>
<!-- 根据parent_id获取title -->
<select id="getTitle" parameterType="int" resultType="string">
	select title from dt_advert_navigation where id=#{0}
</select>

<!-- 根据title模糊查询 -->
<select id="getTitleId" parameterType="string"  resultType="map">
	select id,parent_id,title,type,show_area,status from dt_advert_navigation where title like '%'+#{title}+'%' and show_area=0 and status=1
</select>
<!-- /////////////////////////////////////////////////////////////////////////////////////////////////// -->

<select id="countAdvertNavigation" parameterType="AdvertNavigationVo" resultType="int">
select count(*) from dt_advert_navigation where 1=1
			<if test="title != null and title != ''">
				and title like '%${title}%'
			</if>
			<if test="content_type != -1">
				and content_type =#{content_type}
			</if>
			<if test="status != -1">
				and status =#{status}
			</if> 
</select>

<select id="queryAdvertNavigation" parameterType="AdvertNavigationVo" resultType="AdvertNavigation">

		 
		 SELECT * FROM 

		( SELECT row_number() over (order by tempcolumn) temprownumber, * FROM  

		( SELECT TOP (#{index}*20) tempcolumn=0, *  from dt_advert_navigation   where  1=1 
		
		 	<if test="title != null and title != ''">
				and title like '%${title}%'
			</if>
			<if test="content_type != -1">
				and content_type =#{content_type}
			</if>
			<if test="status != -1">
				and status =#{status}
			</if> 
		order by id desc
		 )vip)mvp where temprownumber>((#{index}-1)*20)

</select>

<select id="getAdvertNavigation" parameterType="int" resultType="AdvertNavigation">
select * from dt_advert_navigation where id=#{0}
</select>

<insert id="addAdvertNavigation" parameterType="AdvertNavigation">
insert into dt_advert_navigation 
(site_id,title,icon,url,parent_id,type,att_value,content_type,content,content_value,update_time,sort_id,pc_sort_id,show_area,status,class_layer,is_hot,count_class_layer,show_type)
values (#{site_id},#{title},#{icon},#{url},#{parent_id},#{type},#{att_value},#{content_type},#{content},#{content_value},#{update_time},#{sort_id},#{pc_sort_id},#{show_area},#{status},#{class_layer},#{is_hot},#{count_class_layer},#{show_type})
</insert>

<update id="updAdvertNavigation" parameterType="AdvertNavigation">
update dt_advert_navigation set 
site_id=#{site_id},
title=#{title},
icon=#{icon},
url=#{url},
parent_id=#{parent_id},
type=#{type},
att_value=#{att_value},
content_type=#{content_type},
content=#{content},
content_value=#{content_value},
update_time=#{update_time},
sort_id=#{sort_id},
pc_sort_id=#{pc_sort_id},
show_area=#{show_area},
status=#{status},
class_layer=#{class_layer},
is_hot=#{is_hot},
count_class_layer=#{count_class_layer},
show_type=#{show_type}
where id=#{id}
</update>


<update id="updAdvertNavigation2" parameterType="AdvertNavigation">
update dt_advert_navigation set 
title=#{title}
where id=#{id}
</update>



<delete id="delAdvertNavigation" parameterType="int">
delete from dt_advert_navigation where id=#{0}
</delete>


<!-- /////////////////////////////////////////////////////////////////////////////////////////////////// -->

<select id="countAdvert" parameterType="AdvertVo" resultType="int">
select count(*) from dt_advert where 1=1
<if test="title != null and title != ''">
				and title like '%'+#{title}+'%'
			</if>
				and advert_type =#{advert_type}
			<if test="type != null and type != ''">
				and type =#{type}
			</if>
</select>

<select id="queryAdvert" parameterType="AdvertVo" resultType="Advert">
SELECT * FROM 

		( SELECT row_number() over (order by tempcolumn) temprownumber, * FROM  

		( SELECT TOP (#{index}*20) tempcolumn=0, *  from dt_advert   where  1=1 
		
			<if test="title != null and title != ''">
				and title like '%'+#{title}+'%'
			</if>
				and advert_type =#{advert_type}
			<if test="type != null and type != ''">
				and type =#{type}
			</if>
		order by id desc
		 )vip)mvp where temprownumber>((#{index}-1)*20)

</select>

<select id="getAdvert" parameterType="int" resultType="Advert">
select * from dt_advert where id=#{0}
</select>

<insert id="addAdvert" parameterType="Advert">
insert into dt_advert 
(title,call_index,price,show_numbers,buy_numbers,remark,type,price_remark,
view_width,view_height,target,advert_type,add_time)
values (#{title},#{call_index},#{price},#{show_numbers},#{buy_numbers},#{remark},#{type},#{price_remark},#{view_width},#{view_height},#{target},#{advert_type},#{add_time})
</insert>

<update id="updAdvert" parameterType="Advert">
update dt_advert set 
title=#{title},
call_index=#{call_index},
price=#{price},
show_numbers=#{show_numbers},
buy_numbers=#{buy_numbers},
remark=#{remark},
type=#{type},
price_remark=#{price_remark},
view_width=#{view_width},
view_height=#{view_height},
target=#{target},
advert_type=#{advert_type},
add_time=#{add_time}
where id=#{id}
</update>

<delete id="delAdvert" parameterType="int">
delete from dt_advert where id=#{0}
</delete>





<!-- /////////////////////////////////////////////////////////////////////////////////////////////////// -->

<select id="countNavigation" parameterType="NavigationVo" resultType="int">
select count(*) from dt_navigation where 1=1
</select>

<select id="queryNavigation" parameterType="NavigationVo" resultType="Navigation">
select * from dt_navigation dt1,
(
  select top 20 id from 
  (
    select top(#{index}*20) id from dt_navigation  where 1=1
    <if test="is_lock != -1">
        and is_lock=#{is_lock}
    </if>
    order by id desc
  )dt order by dt.id asc
)dt2 where dt1.id=dt2.id order by dt1.id
</select>

<select id="getNavigation" parameterType="int" resultType="Navigation">
select * from dt_navigation where id=#{0}
</select>

<insert id="addNavigation" parameterType="Navigation">
insert into dt_navigation 
(parent_id,channel_id,nav_type,name,title,sub_title,icon_url,link_url,
sort_id,is_lock,remark,action_type,is_sys)
values (#{parent_id},#{channel_id},#{nav_type},#{name},#{title},#{sub_title},#{icon_url},#{link_url},#{sort_id},#{is_lock},#{remark},#{action_type},#{is_sys})
</insert>

<update id="updNavigation" parameterType="Navigation">
update dt_navigation set 
parent_id=#{parent_id},
channel_id=#{channel_id},
nav_type=#{nav_type},
name=#{name},
title=#{title},
sub_title=#{sub_title},
icon_url=#{icon_url},
link_url=#{link_url},
sort_id=#{sort_id},
is_lock=#{is_lock},
remark=#{remark},
action_type=#{action_type},
is_sys=#{is_sys}
where id=#{id}
</update>

<delete id="delNavigation" parameterType="int">
delete from dt_navigation where id=#{0}
</delete>




<!-- ///////////////////////////////////// -->
<select id="countActIndex" parameterType="ActIndexVo" resultType="int">
select count(*)  from dt_activity_index  where 1=1
<if test="title != null and title != ''">
				and title like '%'+#{title}+'%'
			</if>
			<if test="status != -1">
				and status =#{status}
			</if>
		
</select>

<select id="queryActIndex" parameterType="ActIndexVo" resultType="ActIndex">

SELECT * FROM 

		( SELECT row_number() over (order by tempcolumn) temprownumber, * FROM  

		( SELECT TOP (#{index}*20) tempcolumn=0, *  from dt_activity_index   where  1=1 
		
			<if test="title != null and title != ''">
				and title like '%'+#{title}+'%'
			</if>
			<if test="status != -1">
				and status =#{status}
			</if>
		order by id desc
		 )vip)mvp where temprownumber>((#{index}-1)*20)

</select>
<select id="getActIndex" parameterType="int" resultType="ActIndex">
select * from dt_activity_index where id=#{0}
</select>

<delete id="delActIndex" parameterType="int">
delete from dt_activity_index where id=#{0}
</delete>
<insert id="addActIndex" parameterType="ActIndex">
insert into dt_activity_index
(navigation_id,title,[key],add_user_type,add_content_type,max_request,status)
values(#{navigation_id},#{title},#{key},#{add_user_type},#{add_content_type},#{max_request},#{status})
</insert>
<update id="updActIndex" parameterType="ActIndex">
 update dt_activity_index set
 navigation_id=#{navigation_id},
 title=#{title},
 [key]=#{key},
 add_user_type=#{add_user_type},
 add_content_type=#{add_content_type},
 max_request=#{max_request},
 status=#{status}
 where  id=#{id}
 
</update>
<!-- ///////////////////////////////////// -->
<select id="countActIndUser" parameterType="ActIndUserVo" resultType="int">
select count(*)  from dt_activity_index_user  where 1=1
<if test="user_id != null and user_id != ''">
		      and user_id=#{user_id}
		    </if>
			<if test="title != null and title != ''">
				and title like '%'+#{title}+'%'
			</if>
			<if test="status != -1">
				and status =#{status}
			</if>		
</select>

<select id="queryActIndUser" parameterType="ActIndUserVo" resultType="ActIndUser">

SELECT * FROM 

		( SELECT row_number() over (order by tempcolumn) temprownumber, * FROM  

		( SELECT TOP (#{index}*20) tempcolumn=0, *  from dt_activity_index_user   where  1=1 
		
			<if test="user_id != null and user_id != ''">
		      and user_id=#{user_id}
		    </if>
			<if test="title != null and title != ''">
				and title like '%'+#{title}+'%'
			</if>
			<if test="status != -1">
				and status =#{status}
			</if>
		order by id desc
		 )vip)mvp where temprownumber>((#{index}-1)*20)

</select>
<select id="getActIndUser" parameterType="int" resultType="ActIndUser">
select * from dt_activity_index_user where id=#{0}
</select>

<delete id="delActIndUser" parameterType="int">
delete from dt_activity_index_user where id=#{0}
</delete>
<insert id="addActIndUser" parameterType="ActIndUser">
insert into dt_activity_index_user
(index_id,site_id,add_time,title,content,content_value,image_url,user_id,role_type,role_value,status,update_time,remark,show_time,show_endtime,custom_url)
values(#{index_id},#{site_id},#{add_time},#{title},#{content},#{content_value},#{image_url}
,#{user_id},#{role_type},#{role_value},#{status},#{update_time},#{remark},#{show_time},#{show_endtime},#{custom_url})
</insert>
<update id="updActIndUser" parameterType="ActIndUser">
 update dt_activity_index_user set
 index_id=#{index_id},
 site_id=#{site_id},
 add_time=#{add_time},
 title=#{title},
 content=#{content},
 content_value=#{content_value},
 image_url=#{image_url},
 user_id=#{user_id},
 role_type=#{role_type},
 role_value=#{role_value},
 status=#{status},
 update_time=#{update_time},
 remark=#{remark},
 show_time=#{show_time},
 show_endtime=#{show_endtime},
 custom_url=#{custom_url}
 where  id=#{id}
 
</update>
<!-- ///////////////////////////////////// -->
<select id="countActCommon" parameterType="ActCommonVo" resultType="int">
select count(*)  from dt_activity_common  where 1=1
		<if test="title != null and title != ''">
				and title like '%'+#{title}+'%'
			</if>
			<if test="state != -1">
				and state =#{state}
			</if>
</select>

<select id="queryActCommon" parameterType="ActCommonVo" resultType="ActCommon">


SELECT * FROM 

		( SELECT row_number() over (order by tempcolumn) temprownumber, * FROM  

		( SELECT TOP (#{index}*20) tempcolumn=0, *  from dt_activity_common   where  1=1 
		
			<if test="title != null and title != ''">
				and title like '%'+#{title}+'%'
			</if>
			<if test="state != -1">
				and state =#{state}
			</if>
		order by id desc
		 )vip)mvp where temprownumber>((#{index}-1)*20)

</select>
<select id="getActCommon" parameterType="int" resultType="ActCommon">
select * from dt_activity_common where id=#{0}
</select>

<delete id="delActCommon" parameterType="int">
delete from dt_activity_common where id=#{0}
</delete>
<insert id="addActCommon" parameterType="ActCommon">
insert into dt_activity_common
(title,pics,begin_time,end_time,content,link_url,sort_id,state,join_user_groups,join_user_role,join_terminal_type,join_user_count)
values(#{title},#{pics},#{begin_time},#{end_time},#{content},#{link_url},
#{sort_id},#{state},#{join_user_groups},#{join_user_role},#{join_terminal_type},#{join_user_count})
</insert>
<update id="updActCommon" parameterType="ActCommon">
 update dt_activity_common set
 title=#{title},
 pics=#{pics},
 begin_time=#{begin_time},
 end_time=#{end_time},
 content=#{content},
 link_url=#{link_url},
 sort_id=#{sort_id},
 state=#{state},
 join_user_groups=#{join_user_groups},
 join_user_role=#{join_user_role},
 join_terminal_type=#{join_terminal_type},
 join_user_count=#{join_user_count}
 where  id=#{id}
 
</update>
<!-- ///////////////////////////////////// -->
<select id="countActShop" parameterType="ActShopVo" resultType="int">
select count(*)  from dt_activity_shop  where 1=1
	<if test="act_type != -1">
				and act_type=#{act_type}
			</if>
			<if test="status != -1">
				and status=#{status}
			</if>
			<if test="is_first != -1">
				and is_first=#{is_first}
			</if>
			<if test="add_type != -1">
				and add_type=#{add_type}
			</if>	
</select>

<select id="queryActShop" parameterType="ActShopVo" resultType="ActShop">

SELECT * FROM 

		( SELECT row_number() over (order by tempcolumn) temprownumber, * FROM  

		( SELECT TOP (#{index}*20) tempcolumn=0, *  from dt_activity_shop   where  1=1 
		
			<if test="act_type != -1">
				and act_type=#{act_type}
			</if>
			<if test="status != -1">
				and status=#{status}
			</if>
			<if test="is_first != -1">
				and is_first=#{is_first}
			</if>
			<if test="add_type != -1">
				and add_type=#{add_type}
			</if>
			
		order by id desc
		 )vip)mvp where temprownumber>((#{index}-1)*20)

</select>
<select id="getActShop" parameterType="int" resultType="ActShop">
select * from dt_activity_shop where id=#{0}
</select>

<delete id="delActShop" parameterType="int">
delete from dt_activity_shop where id=#{0}
</delete>
<insert id="addActShop" parameterType="ActShop">
insert into dt_activity_shop
(apply_begin,apply_end,begin_time,end_time,act_area,channel_id,add_type,title,pics,content,act_type,discount,is_first,status,add_time)
values(#{apply_begin},#{apply_end},#{begin_time},#{end_time},#{act_area},#{channel_id},
#{add_type},#{title},#{pics},#{content},#{act_type},#{discount},#{is_first},#{status},#{add_time})
</insert>
<update id="updActShop" parameterType="ActShop">
 update dt_activity_shop set
 apply_begin=#{apply_begin},
 apply_end=#{apply_end},
 begin_time=#{begin_time},
 end_time=#{end_time},
 act_area=#{act_area},
 channel_id=#{channel_id},
 add_type=#{add_type},
 title=#{title},
 pics=#{pics},
 content=#{content},
 act_type=#{act_type},
 discount=#{discount},
 is_first=#{is_first},
 status=#{status},
 add_time=#{add_time}
 where  id=#{id}
 
</update>
<!-- ///////////////////////////////////// -->
<select id="countActShopGoods" parameterType="ActShopGoodsVo" resultType="int">
select count(*)  from dt_activity_shop_goods  where 1=1
	<if test="user_id != null and user_id != ''">
	  and user_id=#{user_id}
	</if>	
	<if test="status != -1">
	  and status=#{status}
	</if>	
</select>

<select id="queryActShopGoods" parameterType="ActShopGoodsVo" resultType="ActShopGoods">

SELECT * FROM 

		( SELECT row_number() over (order by tempcolumn) temprownumber, * FROM  

		( SELECT TOP (#{index}*20) tempcolumn=0, *  from dt_activity_shop_goods   where  1=1 
		
				<if test="user_id != null and user_id != ''">
				  and user_id=#{user_id}
				</if>	
				<if test="status != -1">
				  and status=#{status}
				</if>
		order by id desc
		 )vip)mvp where temprownumber>((#{index}-1)*20)

</select>
<select id="getActShopGoods" parameterType="int" resultType="ActShopGoods">
select * from dt_activity_shop_goods where id=#{0}
</select>

<delete id="delActShopGoods" parameterType="int">
delete from dt_activity_shop_goods where id=#{0}
</delete>
<insert id="addActShopGoods" parameterType="ActShopGoods">
insert into dt_activity_shop_goods
(activity_id,user_id,user_role_type,user_role_value,article_id,article_price,status,reason,remark,update_time,stars)
values(#{activity_id},#{user_id},#{user_role_type},#{user_role_value},#{article_id},#{article_price},#{status},
#{reason},#{remark},#{update_time},#{stars})
</insert>
<update id="updActShopGoods" parameterType="ActShopGoods">
 update dt_activity_shop_goods set
 activity_id=#{activity_id},
 user_id=#{user_id},
 user_role_type=#{user_role_type},
 user_role_value=#{user_role_value},
 article_id=#{article_id},
 article_price=#{article_price},
 status=#{status},
 reason=#{reason},
 remark=#{remark},
 update_time=#{update_time},
 stars=#{stars}
 where  id=#{id}
 
</update>
<!-- ///////////////////////////////////// -->
<select id="countActSms" parameterType="ActSmsVo" resultType="int">
select count(*)  from dt_activity_sms  where 1=1
	<if test="title != null and title != ''">
				and title=#{title}
			</if>
			<if test="status != -1">
				and status =#{status}
			</if>	
</select>

<select id="queryActSms" parameterType="ActSmsVo" resultType="ActSms">

SELECT * FROM 

		( SELECT row_number() over (order by tempcolumn) temprownumber, * FROM  

		( SELECT TOP (#{index}*20) tempcolumn=0, *  from dt_activity_sms   where  1=1 
		
			<if test="title != null and title != ''">
				and title=#{title}
			</if>
			<if test="status != -1">
				and status =#{status}
			</if>
		order by id desc
		 )vip)mvp where temprownumber>((#{index}-1)*20)

</select>
<select id="getActSms" parameterType="int" resultType="ActSms">
select * from dt_activity_sms where id=#{0}
</select>

<delete id="delActSms" parameterType="int">
delete from dt_activity_sms where id=#{0}
</delete>
<insert id="addActSms" parameterType="ActSms">
insert into dt_activity_sms
(begin_time,end_time,act_area,title,pics,content,discount,status,add_time)
values(#{begin_time},#{end_time},#{act_area},#{title},#{pics},#{content},
#{discount},#{status},#{add_time})
</insert>
<update id="updActSms" parameterType="ActSms">
 update dt_activity_sms set
 begin_time=#{begin_time},
 end_time=#{end_time},
 act_area=#{act_area},
 title=#{title},
 pics=#{pics},
 content=#{content},
 discount=#{discount},
 status=#{status},
 add_time=#{add_time}
 where  id=#{id}
 
</update>
<!-- ///////////////////////////////////// -->
<select id="countActAdvert" parameterType="ActAdvertVo" resultType="int">
select count(*)  from dt_activity_advert  where 1=1
		<if test="title != null and title != ''">
				and title=#{title}
			</if>
			<if test="status != -1">
				and status =#{status}
			</if>
</select>

<select id="queryActAdvert" parameterType="ActAdvertVo" resultType="ActAdvert">

SELECT * FROM 

		( SELECT row_number() over (order by tempcolumn) temprownumber, * FROM  

		( SELECT TOP (#{index}*20) tempcolumn=0, *  from dt_activity_advert   where  1=1 
		
			<if test="title != null and title != ''">
				and title=#{title}
			</if>
			<if test="status != -1">
				and status =#{status}
			</if>
		order by id desc
		 )vip)mvp where temprownumber>((#{index}-1)*20)

</select>
<select id="getActAdvert" parameterType="int" resultType="ActAdvert">
select * from dt_activity_advert where id=#{0}
</select>

<delete id="delActAdvert" parameterType="int">
delete from dt_activity_advert where id=#{0}
</delete>
<insert id="addActAdvert" parameterType="ActAdvert">
insert into dt_activity_advert
(begin_time,end_time,act_area,title,pics,content,discount,status,add_time)
values(#{begin_time},#{end_time},#{act_area},#{title},#{pics},#{content},
#{discount},#{status},#{add_time})
</insert>
<update id="updActAdvert" parameterType="ActAdvert">
 update dt_activity_advert set
 begin_time=#{begin_time},
 end_time=#{end_time},
 act_area=#{act_area},
 title=#{title},
 pics=#{pics},
 content=#{content},
 discount=#{discount},
 status=#{status},
 add_time=#{add_time}
 where  id=#{id}
 
</update>
<!-- ///////////////////////////////////// -->
<select id="countActBusShop" parameterType="ActBusShopVo" resultType="int">
select count(*)  from dt_activity_business_shop  where 1=1
<if test="user_id != null and user_id != ''">
		      and user_id=#{user_id}
		    </if>
		    <if test="act_type != null and act_type != ''">
		      and act_type=#{act_type}
		    </if>
			<if test="status != -1">
				and status =#{status}
			</if>		
</select>

<select id="queryActBusShop" parameterType="ActBusShopVo" resultType="ActBusShop">

SELECT * FROM 

		( SELECT row_number() over (order by tempcolumn) temprownumber, * FROM  

		( SELECT TOP (#{index}*20) tempcolumn=0, *  from dt_activity_business_shop   where  1=1 
		
			<if test="user_id != null and user_id != ''">
		      and user_id=#{user_id}
		    </if>
		    <if test="act_type != null and act_type != ''">
		      and act_type=#{act_type}
		    </if>
			<if test="status != -1">
				and status =#{status}
			</if>
		order by id desc
		 )vip)mvp where temprownumber>((#{index}-1)*20)

</select>
<select id="getActBusShop" parameterType="int" resultType="ActBusShop">
select * from dt_activity_business_shop where id=#{0}
</select>

<delete id="delActBusShop" parameterType="int">
delete from dt_activity_business_shop where id=#{0}
</delete>
<insert id="addActBusShop" parameterType="ActBusShop">
insert into dt_activity_business_shop
(user_id,role_type,role_value,content,begin_time,end_time,title,sub_title,pics,status,add_time,
update_time,is_del,remark,act_type,is_online,is_good_add,act_business,zk_value,mj_value,lj_value)
values(#{user_id},#{role_type},#{role_value},#{content},#{begin_time},#{end_time},
#{title},#{sub_title},#{pics},#{status},#{add_time},#{update_time},#{is_del},
#{remark},#{act_type},#{is_online},#{is_good_add},#{act_business},#{zk_value},#{mj_value},#{lj_value})
</insert>
<update id="updActBusShop" parameterType="ActBusShop">
 update dt_activity_business_shop set
 user_id=#{user_id},
 role_type=#{role_type},
 role_value=#{role_value},
 content=#{content},
 begin_time=#{begin_time},
 end_time=#{end_time},
 title=#{title},
 sub_title=#{sub_title},
 pics=#{pics},
 status=#{status},
 add_time=#{add_time},
 update_time=#{update_time},
 is_del=#{is_del},
 remark=#{remark},
 act_type=#{act_type},
 is_online=#{is_online},
 is_good_add=#{is_good_add},
 act_business=#{act_business},
 zk_value=#{zk_value},
 mj_value=#{mj_value},
 lj_value=#{lj_value}
 where  id=#{id}
 
</update>



<!-- //////////////////// -->

<!-- ///////////////////////////////////// -->
<select id="countActBusiness" parameterType="ActBusinessVo" resultType="int">
select count(*)  from dt_activity_business  where 1=1
<if test="act_type != -1">
				and act_type=#{act_type}
			</if>
			<if test="status != -1">
				and status =#{status}
			</if>
		
</select>

<select id="queryActBusiness" parameterType="ActBusinessVo" resultType="ActBusiness">

SELECT * FROM 

		( SELECT row_number() over (order by tempcolumn) temprownumber, * FROM  

		( SELECT TOP (#{index}*20) tempcolumn=0, *  from dt_activity_business   where  1=1 
		
			<if test="act_type != -1">
				and act_type=#{act_type}
			</if>
			<if test="status != -1">
				and status =#{status}
			</if>
		order by id desc
		 )vip)mvp where temprownumber>((#{index}-1)*20)

</select>
<select id="getActBusiness" parameterType="int" resultType="ActBusiness">
select * from dt_activity_business where id=#{0}
</select>

<delete id="delActBusiness" parameterType="int">
delete from dt_activity_business where id=#{0}
</delete>
<insert id="addActBusiness" parameterType="ActBusiness">
insert into dt_activity_business
(begin_time,end_time,act_area,title,pics,content,act_type,deposit,poundage,percentage,status,add_time)
values(#{begin_time},#{end_time},#{act_area},#{title},#{pics},#{content},#{act_type},#{deposit},#{poundage},#{percentage},#{status},#{add_time})
</insert>
<update id="updActBusiness" parameterType="ActBusiness">
 update dt_activity_business set
 begin_time=#{begin_time},
 end_time=#{end_time},
 act_area=#{act_area},
 title=#{title},
 pics=#{pics},
 content=#{content},
 act_type=#{act_type},
 deposit=#{deposit},
 poundage=#{poundage},
 percentage=#{percentage},
 status=#{status},
 add_time=#{add_time}
 where  id=#{id}
 
</update>

<!-- ///////////////////////////////////// -->
<select id="countActBusGoods" parameterType="ActBusGoodsVo" resultType="int">
select count(*)  from dt_activity_business_goods  where 1=1
<if test="user_id != null and user_id != ''">
		      and user_id=#{user_id}
		    </if>
			<if test="status != -1">
				and status =#{status}
			</if>		
</select>

<select id="queryActBusGoods" parameterType="ActBusGoodsVo" resultType="ActBusGoods">

SELECT * FROM 

		( SELECT row_number() over (order by tempcolumn) temprownumber, * FROM  

		( SELECT TOP (#{index}*20) tempcolumn=0, *  from dt_activity_business_goods   where  1=1 
			<if test="user_id != null and user_id != ''">
		      and user_id=#{user_id}
		    </if>
			<if test="status != -1">
				and status =#{status}
			</if>
		order by id desc
		 )vip)mvp where temprownumber>((#{index}-1)*20)

</select>
<select id="getActBusGoods" parameterType="int" resultType="ActBusGoods">
select * from dt_activity_business_goods where id=#{0}
</select>

<delete id="delActBusGoods" parameterType="int">
delete from dt_activity_business_goods where id=#{0}
</delete>
<insert id="addActBusGoods" parameterType="ActBusGoods">
insert into dt_activity_business_goods
(user_id,role_type,role_value,act_bus_shop_id,article_id,spec_id,old_value,new_value,status)
values(#{user_id},#{role_type},#{role_value},#{act_bus_shop_id},#{article_id},#{spec_id},
#{old_value},#{new_value},#{status})
</insert>
<update id="updActBusGoods" parameterType="ActBusGoods">
 update dt_activity_business_goods set
 user_id=#{user_id},
 role_type=#{role_type},
 role_value=#{role_value},
 act_bus_shop_id=#{act_bus_shop_id},
 article_id=#{article_id},
 spec_id=#{spec_id},
 old_value=#{old_value},
 new_value=#{new_value},
 status=#{status}
 where  id=#{id}
 
</update>
<!-- ///////////////////////////////////// -->
<select id="countActRecherge" parameterType="ActRechergeVo" resultType="int">
select count(*)  from dt_recherge_activity  where 1=1
<if test="user_id != null and user_id != ''">
  and user_id=#{user_id}
</if>		
</select>

<select id="queryActRecherge" parameterType="ActRechergeVo" resultType="ActRecherge">
select * from dt_recherge_activity dt1,
(
	select top 20 id from 
	(
		select top(#{index}*20) id from dt_recherge_activity  where 1=1
		<if test="user_id != null and user_id != ''">
      and user_id=#{user_id}
    </if>  
		order by id desc
	)dt order by dt.id asc
)dt2 where dt1.id=dt2.id order by dt1.id
</select>
<select id="getActRecherge" parameterType="int" resultType="ActRecherge">
select * from dt_recherge_activity where id=#{0}
</select>

<delete id="delActRecherge" parameterType="int">
delete from dt_recherge_activity where id=#{0}
</delete>
<insert id="addActRecherge" parameterType="ActRecherge">
insert into dt_recherge_activity
(user_id,from_value,recherge_limit,recherge_give,first_give,max_count,now_count,state,add_time)
values(#{user_id},#{from_value},#{recherge_limit},#{recherge_give},#{first_give},#{max_count},
#{now_count},#{state},#{add_time})
</insert>
<update id="updActRecherge" parameterType="ActRecherge">
 update dt_recherge_activity set
 user_id=#{user_id},
 from_value=#{from_value},
 recherge_limit=#{recherge_limit},
 recherge_give=#{recherge_give},
 first_give=#{first_give},
 max_count=#{max_count},
 now_count=#{now_count},
 state=#{state},
 add_time=#{add_time}
 where  id=#{id}
 
</update>


<!-- ///////////////////////////////////// -->
<select id="countActRecUser" parameterType="ActRecUserVo" resultType="int">
select count(*)  from dt_recherge_activity_users  where 1=1
<if test="user_id != null and user_id != ''">
			     and user_id=#{user_id}
			</if> 
			<if test="first_order_no != null and first_order_no != ''">
				and first_order_no =#{first_order_no}
			</if> 
			<if test="first_state != -1">
				and first_state =#{first_state}
			</if>		
</select>

<select id="queryActRecUser" parameterType="ActRecUserVo" resultType="ActRecUser">

SELECT * FROM 

		( SELECT row_number() over (order by tempcolumn) temprownumber, * FROM  

		( SELECT TOP (#{index}*20) tempcolumn=0, *  from dt_recherge_activity_users   where  1=1 
			<if test="user_id != null and user_id != ''">
			     and user_id=#{user_id}
			</if> 
			<if test="first_order_no != null and first_order_no != ''">
				and first_order_no =#{first_order_no}
			</if> 
			<if test="first_state != -1">
				and first_state =#{first_state}
			</if>
		order by id desc
		 )vip)mvp where temprownumber>((#{index}-1)*20)

</select>
<select id="getActRecUser" parameterType="int" resultType="ActRecUser">
select * from dt_recherge_activity_users where id=#{0}
</select>

<delete id="delActRecUser" parameterType="int">
delete from dt_recherge_activity_users where id=#{0}
</delete>
<insert id="addActRecUser" parameterType="ActRecUser">
insert into dt_recherge_activity_users
(user_id,activity_user_id,recherge_give,first_give,first_state,first_time,first_order_no,first_order_type,state,add_time)
values(#{user_id},#{activity_user_id},#{recherge_give},#{first_give},#{first_state},
#{first_time},#{first_order_no},#{first_order_type},#{state},#{add_time})
</insert>
<update id="updActRecUser" parameterType="ActRecUser">
 update dt_recherge_activity_users set
 user_id=#{user_id},
 activity_user_id=#{activity_user_id},
 recherge_give=#{recherge_give},
 first_give=#{first_give},
 first_state=#{first_state},
 first_time=#{first_time},
 first_order_no=#{first_order_no},
 first_order_type=#{first_order_type},
 state=#{state},
 add_time=#{add_time}
 where  id=#{id}
 
</update>


<!-- //dt_advert_banner（广告位购买信息表） -->
<select id="countAdvertBanner" parameterType="AdvertBannerVo" resultType="int">
select count(*)  from dt_advert_banner  where 1=1
<if test="title != null and title != ''">
				and title like '%'+#{title}+'%'
			</if>
			<if test="state != -1">
				and state =#{state}
			</if>
			<if test="is_del != -1">
				and is_del =#{is_del}
			</if>
</select>

<select id="queryAdvertBanner" parameterType="AdvertBannerVo" resultType="AdvertBanner">

SELECT * FROM 

		( SELECT row_number() over (order by tempcolumn) temprownumber, * FROM  

		( SELECT TOP (#{index}*20) tempcolumn=0, *  from dt_advert_banner   where  1=1 
		
			<if test="title != null and title != ''">
				and title like '%'+#{title}+'%'
			</if>
			<if test="state != -1">
				and state =#{state}
			</if>
			
			<if test="is_del != -1">
				and is_del =#{is_del}
			</if>
		order by id desc
		 )vip)mvp where temprownumber>((#{index}-1)*20)

</select>
<select id="getAdvertBanner" parameterType="int" resultType="AdvertBanner">
select * from dt_advert_banner where id=#{0}
</select>
<insert id="addAdvertBanner" parameterType="AdvertBanner">
insert into dt_advert_banner
(advert_id,title,start_time,end_time,area,state,remark,update_time,user_id,user_role_type,user_role_type_value,cust_money,is_del)
values(#{advert_id},#{title},#{start_time},#{end_time},#{area},#{state},#{remark},#{update_time},
#{user_id},#{user_role_type},#{user_role_value},#{cust_money},#{is_del})
</insert>
<update id="updAdvertBanner" parameterType="AdvertBanner">
update dt_advert_banner set
advert_id=#{advert_id},
title=#{title},
start_time=#{start_time},
end_time=#{end_time},
area=#{area},
state=#{state},
remark=#{remark},
update_time=#{update_time},
user_id=#{user_id},
user_role_type=#{user_role_type},
user_role_type_value=#{user_role_value},
cust_money=#{cust_money},
is_del=#{is_del}
where  id=#{id}
 
</update>

<delete id="delAdvertBanner" parameterType="int">
delete from dt_advert_banner where id=#{0}
</delete>


<!-- //dt_advert_content(广告位放置内容表) -->
<select id="countAdvertContent" parameterType="AdvertContentVo" resultType="int">
select count(*)  from dt_advert_content  where 1=1
	<if test="content != null and content != ''">
				and content like '%'+#{content}+'%'
			</if>
			<if test="state != -1">
				and state =#{state}
			</if>
			
			<if test="is_del != -1">
				and is_del =#{is_del}
			</if>
			<if test="is_show != -1">
				and is_show =#{is_show}
			</if>
</select>

<select id="queryAdvertContent" parameterType="AdvertContentVo" resultType="AdvertContent">

SELECT * FROM 

		( SELECT row_number() over (order by tempcolumn) temprownumber, * FROM  

		( SELECT TOP (#{index}*20) tempcolumn=0, *  from dt_advert_content   where  1=1 
		
			<if test="content != null and content != ''">
				and content like '%'+#{content}+'%'
			</if>
			<if test="state != -1">
				and state =#{state}
			</if>
			
			<if test="is_del != -1">
				and is_del =#{is_del}
			</if>
			<if test="is_show != -1">
				and is_show =#{is_show}
			</if>
		order by id desc
		 )vip)mvp where temprownumber>((#{index}-1)*20)

</select>
<select id="getAdvertContent" parameterType="int" resultType="AdvertContent">
select * from dt_advert_content where id=#{0}
</select>
<insert id="addAdvertContent" parameterType="AdvertContent">
insert into dt_advert_content
(advert_id,advert_banner_id,name,file_path,link_url,content,state,is_show,remark,update_time,user_id,user_role_type,user_role_value,is_del)
values(#{advert_id},#{advert_banner_id},#{name},#{file_path},#{link_url},#{content},#{state},#{is_show},
#{remark},#{update_time},#{user_id},#{user_role_type},#{user_role_value},#{is_del})
</insert>
<update id="updAdvertContent" parameterType="AdvertContent">
update dt_advert_content set
advert_id=#{advert_id},
advert_banner_id=#{advert_banner_id},
name=#{name},
file_path=#{file_path},
link_url=#{link_url},
content=#{content},
state=#{state},
is_show=#{is_show},
remark=#{remark},
update_time=#{update_time},
user_id=#{user_id},
user_role_type=#{user_role_type},
user_role_value=#{user_role_value},
is_del=#{is_del}
where  id=#{id}
 
</update>

<delete id="delAdvertContent" parameterType="int">
delete from dt_advert_content where id=#{0}
</delete>


<!-- //dt_article_attribute_field（内容扩展属性表） -->
<select id="countArticleAttributeField" parameterType="ArticleAttributeFieldVo" resultType="int">
select count(*)  from dt_article_attribute_field  where 1=1
<if test="is_required != -1">
				and is_required=#{is_required}
			</if>
			<if test="editor_type != -1">
				and editor_type =#{editor_type}
			</if>
</select>

<select id="queryArticleAttributeField" parameterType="ArticleAttributeFieldVo" resultType="ArticleAttributeField">

SELECT * FROM 

		( SELECT row_number() over (order by tempcolumn) temprownumber, * FROM  

		( SELECT TOP (#{index}*20) tempcolumn=0, *  from dt_article_attribute_field   where  1=1 
		
			<if test="is_required != -1">
				and is_required=#{is_required}
			</if>
			<if test="editor_type != -1">
				and editor_type =#{editor_type}
			</if>
		order by id desc
		 )vip)mvp where temprownumber>((#{index}-1)*20)

</select>
<select id="getArticleAttributeField" parameterType="int" resultType="ArticleAttributeField">
select * from dt_article_attribute_field where id=#{0}
</select>
<insert id="addArticleAttributeField" parameterType="ArticleAttributeField">
insert into dt_article_attribute_field
(name,title,control_type,data_type,data_length,data_place,item_option,default_value,is_required,
is_password,is_html,editor_type,valid_tip_msg,valid_error_msg,valid_pattern,sort_id,is_sys)
values(#{name},#{title},#{control_type},#{data_type},#{data_length},#{data_place},#{item_option},#{default_value},#{is_required},#{is_password},#{is_html},#{editor_type},#{valid_tip_msg},#{valid_error_msg},#{valid_pattern},#{sort_id},#{is_sys})
</insert>
<update id="updArticleAttributeField" parameterType="ArticleAttributeField">
update dt_article_attribute_field set
name=#{name},
title=#{title},
control_type=#{control_type},
data_type=#{data_type},
data_length=#{data_length},
data_place=#{data_place},
item_option=#{item_option},
default_value=#{default_value},
is_required=#{is_required},
is_password=#{is_password},
is_html=#{is_html},
editor_type=#{editor_type},
valid_tip_msg=#{valid_tip_msg},
valid_error_msg=#{valid_error_msg},
valid_pattern=#{valid_pattern},
sort_id=#{sort_id},
is_sys=#{is_sys}
where  id=#{id}
 
</update>

<delete id="delArticleAttributeField" parameterType="int">
delete from dt_article_attribute_field where id=#{0}
</delete>


<!-- //dt_article_attribute_value（内容扩展属性对应值记录表*会动态更新） -->
<select id="countArticleAttributeValue" parameterType="ArticleAttributeValueVo" resultType="int">
select count(*)  from dt_article_attribute_value  where 1=1
<if test="author != null and author != ''">
				and author=#{author}
			</if>
			<if test="source != null and source != ''">
				and source =#{source}
			</if>
</select>

<select id="queryArticleAttributeValue" parameterType="ArticleAttributeValueVo" resultType="ArticleAttributeValue">

SELECT * FROM 

		( SELECT row_number() over (order by tempcolumn) temprownumber, * FROM  

		( SELECT TOP (#{index}*20) tempcolumn=0, *  from dt_article_attribute_value   where  1=1 
		
			<if test="author != null and author != ''">
				and author=#{author}
			</if>
			<if test="source != null and source != ''">
				and source =#{source}
			</if>
		order by article_id desc
		 )vip)mvp where temprownumber>((#{index}-1)*20)

</select>
<select id="getArticleAttributeValue" parameterType="int" resultType="ArticleAttributeValue">
select * from dt_article_attribute_value where article_id=#{0}
</select>
<insert id="addArticleAttributeValue" parameterType="ArticleAttributeValue">
insert into dt_article_attribute_value
(source,author)
values(#{source},#{author})
</insert>
<update id="updArticleAttributeValue" parameterType="ArticleAttributeValue">
update dt_article_attribute_value set
source=#{source},
author=#{author}
where  article_id=#{article_id}
 
</update>

<delete id="delArticleAttributeValue" parameterType="int">
delete from dt_article_attribute_value where article_id=#{0}
</delete>


<!-- //dt_article_goods_spec（文章派生的商品类所选则规格信息表） -->
<select id="countArticleGoodsSpec" parameterType="ArticleGoodsSpecVo" resultType="int">
select count(*)  from dt_article_goods_spec  where 1=1
<if test="article_id != null and article_id != ''">
				and article_id=#{article_id}
			</if>
			<if test="title != null and title != ''">
				and title like '%${title}%'
			</if>
</select>

<select id="queryArticleGoodsSpec" parameterType="ArticleGoodsSpecVo" resultType="ArticleGoodsSpec">

SELECT * FROM 

		( SELECT row_number() over (order by tempcolumn) temprownumber, * FROM  

		( SELECT TOP (#{index}*20) tempcolumn=0, *  from dt_article_goods_spec   where  1=1 
		
			<if test="article_id != null and article_id != ''">
				and article_id=#{article_id}
			</if>
			<if test="title != null and title != ''">
				and title like '%${title}%'
			</if>
		order by id desc
		 )vip)mvp where temprownumber>((#{index}-1)*20)

</select>
<select id="getArticleGoodsSpec" parameterType="int" resultType="ArticleGoodsSpec">
select * from dt_article_goods_spec where id=#{0}
</select>
<insert id="addArticleGoodsSpec" parameterType="ArticleGoodsSpec">
insert into dt_article_goods_spec
(article_id,spec_id,parent_id,title,img_url)
values(#{article_id},#{spec_id},#{parent_id},#{title},#{img_url})
</insert>
<update id="updArticleGoodsSpec" parameterType="ArticleGoodsSpec">
update dt_article_goods_spec set
article_id=#{article_id},
spec_id=#{spec_id},
parent_id=#{parent_id},
title=#{title},
img_url=#{img_url}
where  id=#{id}
 
</update>

<delete id="delArticleGoodsSpec" parameterType="int">
delete from dt_article_goods_spec where article_id=#{0}
</delete>


<!-- //dt_article_groupshop（集团店批量操作记录表） -->
<select id="countArticleGroupshop" parameterType="ArticleGroupshopVo" resultType="int">
select count(*)  from dt_article_groupshop  where 1=1
<if test="groupshop_id != null and groupshop_id != ''">
				and groupshop_id=#{groupshop_id}
			</if>
			<if test="is_del != -1">
				and is_del =#{is_del}
			</if>
</select>

<select id="queryArticleGroupshop" parameterType="ArticleGroupshopVo" resultType="ArticleGroupshop">

SELECT * FROM 

		( SELECT row_number() over (order by tempcolumn) temprownumber, * FROM  

		( SELECT TOP (#{index}*20) tempcolumn=0, *  from dt_article_groupshop   where  1=1 
		
			<if test="groupshop_id != null and groupshop_id != ''">
				and groupshop_id=#{groupshop_id}
			</if>
			<if test="is_del != -1">
				and is_del =#{is_del}
			</if>
		order by id desc
		 )vip)mvp where temprownumber>((#{index}-1)*20)

</select>
<select id="getArticleGroupshop" parameterType="int" resultType="ArticleGroupshop">
select * from dt_article_groupshop where id=#{0}
</select>
<insert id="addArticleGroupshop" parameterType="ArticleGroupshop">
insert into dt_article_groupshop
(groupshop_id,shop_id,groupshop_article_id,article_id,is_del)
values(#{groupshop_id},#{shop_id},#{groupshop_article_id},#{article_id},#{is_del})
</insert>
<update id="updArticleGroupshop" parameterType="ArticleGroupshop">
update dt_article_groupshop set
groupshop_id=#{groupshop_id},
shop_id=#{shop_id},
groupshop_article_id=#{groupshop_article_id},
article_id=#{article_id},
is_del=#{is_del}
where  id=#{id}
 
</update>

<delete id="delArticleGroupshop" parameterType="int">
delete from dt_article_groupshop where id=#{0}
</delete>


<!-- //dt_article_goods_groupshop（集团店商品规格批量操作记录表） -->
<select id="countArticleGoodsGroupshop" parameterType="ArticleGoodsGroupshopVo" resultType="int">
select count(*)  from dt_article_goods_groupshop  where 1=1
</select>

<select id="queryArticleGoodsGroupshop" parameterType="ArticleGoodsGroupshopVo" resultType="ArticleGoodsGroupshop">

SELECT * FROM 

		( SELECT row_number() over (order by tempcolumn) temprownumber, * FROM  

		( SELECT TOP (#{index}*20) tempcolumn=0, *  from dt_article_goods_groupshop   where  1=1 
		
			<if test="groupshop_id != null and groupshop_id != ''">
				and groupshop_id=#{groupshop_id}
			</if>
			<if test="is_del != -1">
				and is_del =#{is_del}
			</if>
		order by id desc
		 )vip)mvp where temprownumber>((#{index}-1)*20)

</select>
<select id="getArticleGoodsGroupshop" parameterType="int" resultType="ArticleGoodsGroupshop">
select * from dt_article_goods_groupshop where id=#{0}
</select>
<insert id="addArticleGoodsGroupshop" parameterType="ArticleGoodsGroupshop">
insert into dt_article_goods_groupshop
(groupshop_id,shop_id,groupshop_article_id,shop_article_id,groupshop_goods_id,shop_goods_id,is_del)
values(#{groupshop_id},#{shop_id},#{groupshop_article_id},#{shop_article_id},#{groupshop_goods_id},#{shop_goods_id},#{is_del})
</insert>
<update id="updArticleGoodsGroupshop" parameterType="ArticleGoodsGroupshop">
update dt_article_goods_groupshop set
groupshop_id=#{groupshop_id},
shop_id=#{shop_id},
groupshop_article_id=#{groupshop_article_id},
shop_article_id=#{shop_article_id},
groupshop_goods_id=#{groupshop_goods_id},
shop_goods_id=#{shop_goods_id},
is_del=#{is_del}
where  id=#{id}
 
</update>

<delete id="delArticleGoodsGroupshop" parameterType="int">
delete from dt_article_goods_groupshop where id=#{0}
</delete>


<!-- //dt_article_tags（热门文章TAG标签存储信息表） -->
<select id="countArticleTags" parameterType="ArticleTagsVo" resultType="int">
select count(*)  from dt_article_tags  where 1=1
<if test="title != null and title != ''">
				and title like '%'+#{title}+'%'
			</if>
</select>

<select id="queryArticleTags" parameterType="ArticleTagsVo" resultType="ArticleTags">

SELECT * FROM 

		( SELECT row_number() over (order by tempcolumn) temprownumber, * FROM  

		( SELECT TOP (#{index}*20) tempcolumn=0, *  from dt_article_tags   where  1=1 
		
			<if test="title != null and title != ''">
				and title like '%'+#{title}+'%'
			</if>
		order by id desc
		 )vip)mvp where temprownumber>((#{index}-1)*20)

</select>
<select id="getArticleTags" parameterType="int" resultType="ArticleTags">
select * from dt_article_tags where id=#{0}
</select>
<insert id="addArticleTags" parameterType="ArticleTags">
insert into dt_article_tags
(title,is_red,sort_id,add_time)
values(#{title},#{is_red},#{sort_id},#{add_time})
</insert>
<update id="updArticleTags" parameterType="ArticleTags">
update dt_article_tags set
title=#{title},
is_red=#{is_red},
sort_id=#{sort_id},
add_time=#{add_time}
where  id=#{id}
 
</update>

<delete id="delArticleTags" parameterType="int">
delete from dt_article_tags where id=#{0}
</delete>


<!-- //dt_article_tags_relation（热门文章TAG标签对应关系信息表） -->
<select id="countArticleTagsRelation" parameterType="ArticleTagsRelationVo" resultType="int">
select count(*)  from dt_article_tags_relation  where 1=1
<if test="article_id != null and article_id != ''">
				and article_id=#{article_id}
			</if>
			<if test="tag_id != null and tag_id != ''">
				and tag_id =#{tag_id}
			</if>
</select>

<select id="queryArticleTagsRelation" parameterType="ArticleTagsRelationVo" resultType="ArticleTagsRelation">

SELECT * FROM 

		( SELECT row_number() over (order by tempcolumn) temprownumber, * FROM  

		( SELECT TOP (#{index}*20) tempcolumn=0, *  from dt_article_tags_relation   where  1=1 
		
			<if test="article_id != null and article_id != ''">
				and article_id=#{article_id}
			</if>
			<if test="tag_id != null and tag_id != ''">
				and tag_id =#{tag_id}
			</if>
		order by id desc
		 )vip)mvp where temprownumber>((#{index}-1)*20)

</select>
<select id="getArticleTagsRelation" parameterType="int" resultType="ArticleTagsRelation">
select * from dt_article_tags_relation where id=#{0}
</select>
<insert id="addArticleTagsRelation" parameterType="ArticleTagsRelation">
insert into dt_article_tags_relation
(article_id,tag_id)
values(#{article_id},#{tag_id})
</insert>
<update id="updArticleTagsRelation" parameterType="ArticleTagsRelation">
update dt_article_tags_relation set
article_id=#{article_id},
tag_id=#{tag_id}
where  id=#{id}
 
</update>

<delete id="delArticleTagsRelation" parameterType="int">
delete from dt_article_tags_relation where id=#{0}
</delete>

<!-- //dt_channel_tags_relation（热门频道TAG标签对应关系信息表） -->
<select id="countChannelTagsRelation" parameterType="ChannelTagsRelationVo" resultType="int">
select count(*)  from dt_channel_tags_relation  where 1=1
<if test="channel_id != null and channel_id != ''">
				and channel_id=#{channel_id}
			</if>
			<if test="tag_id != null and tag_id != ''">
				and tag_id =#{tag_id}
			</if>
</select>

<select id="queryChannelTagsRelation" parameterType="ChannelTagsRelationVo" resultType="ChannelTagsRelation">

SELECT * FROM 

		( SELECT row_number() over (order by tempcolumn) temprownumber, * FROM  

		( SELECT TOP (#{index}*20) tempcolumn=0, *  from dt_channel_tags_relation   where  1=1 
		
			<if test="channel_id != null and channel_id != ''">
				and channel_id=#{channel_id}
			</if>
			<if test="tag_id != null and tag_id != ''">
				and tag_id =#{tag_id}
			</if>
		order by id desc
		 )vip)mvp where temprownumber>((#{index}-1)*20)

</select>
<select id="getChannelTagsRelation" parameterType="int" resultType="ChannelTagsRelation">
select * from dt_channel_tags_relation where id=#{0}
</select>
<insert id="addChannelTagsRelation" parameterType="ChannelTagsRelation">
insert into dt_channel_tags_relation
(channel_id,tag_id)
values(#{channel_id},#{tag_id})
</insert>
<update id="updChannelTagsRelation" parameterType="ChannelTagsRelation">
update dt_channel_tags_relation set
channel_id=#{channel_id},
tag_id=#{tag_id}
where  id=#{id}
 
</update>

<delete id="delChannelTagsRelation" parameterType="int">
delete from dt_channel_tags_relation where id=#{0}
</delete>



</mapper>



